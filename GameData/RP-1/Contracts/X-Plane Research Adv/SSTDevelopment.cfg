CONTRACT_TYPE
{
	name = AdvXplanesSSTDevelopment
	group = AdvXPlanes

	title = Advanced-X Planes (Supersonic Transport Development)
	
	tag = exclude_Supersonic

	description = <b>Program: Advanced X-Plane Research<br>Type: <color=red>CAPSTONE</color></b><br><br>Design, build, and fly a crewed passenger jet with room for 120 and maintain @VesselGroup/HoldSituation/minSpeed m/s in level flight for 3hrs, then return home safely. Optionally, landing back at the runway will award extra reputation. If playing from the Cape, the Space Shuttle runway provided by the RSS-CanaveralHD mod is also a valid landing target.<br><br><color=white><b>After this contract has been completed, the 'SST Development (High Speed) Optional' and 'SST Development (Capacity) Optional' contracts will become available.</b></color>
	genericDescription = Design, build, and fly a passenger jet aircraft to maintain a specific speed in level flight, then return home safely.

	synopsis = Fly a crewed jet aircraft to maintain @VesselGroup/HoldSituation/minSpeed m/s in level flight and hold, then return safely.

	completedMessage = Congratulations on a successful flight!
	
	sortKey = 4507

	deadline = 0
	cancellable = true
	declinable = true
	autoAccept = false
	minExpiry = 1
	maxExpiry = 1

	targetBody = HomeWorld()

	maxCompletions = 1
	maxSimultaneous = 1
	prestige = Trivial

	// ************ REWARDS ************
	prestige = Trivial       // 1.0x
	advanceFunds = 0
	rewardScience = 0
	rewardFunds = 0
	failureFunds = 0
	rewardReputation = 300 // being the first nation to develop a supersonic passenger plane is a big PR win, see the USSR racing the UK/France. That said, only Concorde, the second such aircraft is remembered widly today. Being first isn't everything.
	failureReputation = 0 // was @rewardReputation
	
	// ************* REQUIREMENTS ****************

	REQUIREMENT
	{
		name = ProgramActive
		type = ProgramActive
		program = AdvXPlanes
	}

	REQUIREMENT
	{
		name = CompleteContract
		type = CompleteContract
		minCount = 1
		contractType = AdvXPlanesSupersonicHeavy
	}
	
	REQUIREMENT
	{
		name = AcceptContract
		type = AcceptContract
		tag = exclude_Supersonic
		invertRequirement = true
	}

	PARAMETER
	{
		name = VesselGroup
		type = VesselParameterGroup
		title = Maintain between @HoldSituation/minSpeed m/s and @HoldSituation/maxSpeed m/s in level flight with a crewed jet aircraft.
		define = supersonicCraft
		dissassociateVesselsOnContractCompletion = true
		dissassociateVesselsOnContractCompletion = true
		resetChildrenWhenVesselDestroyed = true
		
		PARAMETER
		{
			name = BuiltAtSPH
			type = VesselBuiltAt
			builtAt = SPH
		}

		PARAMETER
		{
			name = Has Crew
			type = HasCrew
			minCrew = 3 //Pilot, Copilot, Flight Engineer
			crewOnly = true
			title = Have at least 3 crewmember on board.
			hideChildren = true
		}
		
		PARAMETER
        {
            name = HasCapacity
            type = HasCrewCapacity
            minCapacity = 120
            title = Space for at least 120 passengers
            hideChildren = true
            disableOnStateChange = false
        }

		PARAMETER
		{
			name = NoRocket
			type = PartValidation
			title = Vessel is a jet (no rocket engines allowed)
			hideChildren = true
			NONE
			{
				partModule = ModuleEnginesRF
				partModule = ModuleEnginesAJEPropeller
			}
		}
		
		PARAMETER
		{
			name = HoldSituation
			type = ReachState
			minSpeed = 650 // ~ M2.0
			maxSpeed = 730 // ~ M2.25
			minRateOfClimb = -50 // set a looser set of parameters, that way time warp can be used at higher settings and the length of the flight won't become monotonous.
			maxRateOfClimb = 50 // see above :)
			situation = FLYING
			
			title = Hold between @minSpeed m/s to @maxSpeed m/s in semi-level flight.
			
			disableOnStateChange = true
			
			PARAMETER
			{
				name = Duration
				type = Duration
				duration = 150m //2.5hrs in cruise
				preWaitText = Reach specified speed.
				waitingText = Testing long duration highspeed flight
				completionText = Flight completed, you are cleared to land.
			}
		}
	}

	PARAMETER
	{
		name = ReturnVesselGroup
		type = VesselParameterGroup
		title = Land/splashdown anywhere
		vessel = supersonicCraft
		hideChildren = true

		PARAMETER
		{
			name = ReturnHome
			type = RP1ReturnHome
			title = Return home safely
			maxSpeed = 5
			hideChildren = true
			completeInSequence = true
		}
	}

	PARAMETER
	{
		name = OptVesselGroup
		type = VesselParameterGroup
		title = Land on the runway with descent angle lower than 10 degrees
		rewardReputation = Round(@/rewardReputation * 0.3 + 0.4999, 1)
		optional = true
		vessel = supersonicCraft
		hideChildren = true

		PARAMETER
		{
			name = HorizontalLanding
			type = HorizontalLanding
			descentAngle = 10
			hideChildren = true
			completeInSequence = true
		}

		PARAMETER
		{
			name = ReturnHome
			type = RP1ReturnHome
			landAtFacility = Runway
			maxSpeed = 5
			hideChildren = true
			completeInSequence = true
		}
	}
}
