CONTRACT_TYPE
{
	name = SoundingRocketPhoto
	group = SoundingRockets
	
	title = Early Downrange Track Photography	
	description = V-2s launched by the U.S. from the White Sand Proving Grounds returned the first images of Earth from space. We need you to test emerging high-altitude photography technology. Design, build, and launch a rocket with some bulky testing equipment that will recover film imagery from just above the edge of space. This is a series of four contracts.
	synopsis = Launch a rocket with an early film camera and 250 units of payload that stays between 100 and 180 km for at least three minutes and covers a downrange distance of @targetDistanceKM
	completedMessage = Excellent! Both the media and our scientists will be excited to see these lovely shots.

	minExpiry = 0
	maxExpiry = 0
	maxCompletions = 4
	maxSimultaneous = 1
	deadline = 90	
	
	targetBody = HomeWorld()

	// Contract rewards
	prestige = Trivial
	rewardScience = 4
	rewardReputation = 20
	rewardFunds = @targetDistance * 50

	REQUIREMENT {
		name = CompleteContract
		type = CompleteContract
		contractType = SuborbitalReturn
		title = Complete @contractType Contract
	}	
	
	DATA {
		type = int
		payload = 250
	}

	DATA {
		type = List<float>
		distances = [ 250000, 500000, 750000, 1000000 ]
	}
	
	DATA {
		type = float
		index = RP0SoundingPhotoIndex
	}
	
	DATA {
		type = float
		targetDistance = @distances.ElementAt(@index)
		targetDistanceKM = @targetDistance * 0.001
	}

	BEHAVIOUR {
		name = IncrementIndex
		type = Expression
		CONTRACT_COMPLETED_SUCCESS
		{
			RP0SoundingPhotoIndex = RP0SoundingPhotoIndex + 1
		}
	}

	PARAMETER {
		name = MissionParameters
		type = VesselParameterGroup		
		title = Remain between 100 and 180 km at least three minutes with a camera and @/payload units of payload while covering a surface track of at least @/targetDistanceKM km.
		
		PARAMETER {
			name = NewVessel
			type = NewVessel
			title = Launch a New Vessel
			hideChildren = true
		}

		PARAMETER {
			name = HasSoundingPayload
			type = HasResource
			resource = SoundingPayload
			minQuantity = @/payload
			title = Have a SoundingPayload of at least @minQuantity units on the craft
			hideChildren = true
		}

		PARAMETER {
			name = HasCamera
			type = PartValidation
			minCount = 1
			completeInSequence = true
			part = science.module
			title = Include a early film camera on the craft
			hideChildren = true
		}

		PARAMETER {
			name = SpaceAltitude
			type = ReachState
			completeInSequence = true
			minAltitude = 100000
			maxAltitude = 180000
			disableOnStateChange = true
			title = Remain between 100 and 180 km at least three minutes
			
			PARAMETER {
				name = Duration
				type = Duration
				duration = 3m
				preWaitText = Waiting for required altitude
				waitingText = Experiment in progress
				completionText = Experiment complete
			}      
		}
		
		PARAMETER {
			name = ReachDistance
			type = DownrangeDistance
			distance = @/targetDistance
			title = Reach a downrange distance of at least @/targetDistanceKM km
		}

		PARAMETER {
			name = ReturnHome
			type = ReturnHome
			targetBody = HomeWorld()
			title = Return home safely
			hideChildren = true
		}
	}
}
	