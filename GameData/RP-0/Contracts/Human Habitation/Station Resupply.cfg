CONTRACT_TYPE
{
	name = spaceStationResupply
	group = HumanHabitationContracts
	
	title = Resupply the Space Station
	
	description = Design, build, and launch a resupply vehicle to the space station. The resupply could be either crewed or uncrewed. //double mission is possible: crew rotation and ressuply
	
	synopsis = We're low on snacks up there. Send us some water, food and oxygen!
	
	completedMessage = Hurrah! Now the crew can breath normally and spend time eating space pizzas while hearing at some disco music!

	cancellable = true 
	declinable = true		
	deadline = 180 // 6 months

	prestige = Significant
	
	targetBody = HomeWorld()

	maxSimultaneous = 1
	
	// reward block
	advanceFunds = 30000.0
	rewardReputation = 300.0
	rewardFunds = @advanceFunds
	failureReputation = @rewardReputation
	failureFunds = @advanceFunds * 2
	
	
	REQUIREMENT
	{
		name = HaveStationSupplyLow //less than half of the max supply in food OR water OR oxygen
		type = Expression
		expression = VesselIdentifier(spaceStation) != null && ((Vessel(spaceStation).ResourceQuantity(Oxygen)/Vessel(spaceStation).ResourceCapacity(Oxygen)) < 0.5 || Vessel(spaceStation).ResourceQuantity(Food)/Vessel(spaceStation).ResourceCapacity(Food)) < 0.5 || Vessel(spaceStation).ResourceQuantity(Water)/Vessel(spaceStation).ResourceCapacity(Water)) < 0.5) 
	}
	
	REQUIREMENT
	{
		name = CompleteContractFirstStation
		type = CompleteContract
		contractType = first_spaceStation
	}
	
	PARAMETER
	{
		name = vesselGroupLaunch
		type = VesselParameterGroup
		title = Launch the resupply spacecraft and dock it with the space station.
		
		PARAMETER //won't be completed with an existing module
		{
			name = NewVessel
			type = NewVessel
		}		
		PARAMETER //at least one fifth of the standard 4-crew cabin storage capacity
		{
			name = HasResource
			type = HasResource
			resource = Food
			minQuantity = 140.4
		}
		PARAMETER
		{
			name = HasResource
			type = HasResource
			resource = Water
			minQuantity = 92.8
		}
		PARAMETER
		{
			name = HasResource
			type = HasResource
			resource = Oxygen
			minQuantity = 14212.77
		}
		PARAMETER
		{
			name = Rendezvous
			type = Rendezvous
			vessel = spaceStation
			distance = 1000
		}
		PARAMETER
		{
			name = Docking
			type = Docking
			title = Dock the resupply spaceship to the space station.
			vessel = spaceStation
		}
	}
}
