CONTRACT_TYPE
{
	name = RepeatCmlSatPayloadIncrease
	title = Commercial Satellite Payload Increase
	group = CommercialSats
	agent = Satellites

	description = Raises the Payload Factor for new Commercial Satellite contracts.  New contracts will begin to be issued in 60m.  After accepting this contract you can also wait (here) briefly if you want the existing offered commercial satellite contracts to be removed (Previously accepted contracts are unaffected).

	synopsis = Increases the Payload for all new Commercial Satellite contracts to @/cmlSat_NewPayloadQuantity.Print() units.

	completedMessage = Congratulations!

	sortKey = 3000

	cancellable = true
	declinable = true
	autoAccept = false
	minExpiry = 5
	maxExpiry = 10
	maxCompletions = 0
	maxSimultaneous = 1
	deadline = 365  // 1 year

	targetBody = HomeWorld()

	prestige = Trivial       // 1.0x
	advanceFunds = 0
	rewardScience = 0
	rewardReputation = 0
	rewardFunds = 0
	failureReputation = 0
	failureFunds = 0

	// ************ DATA ************
	DATA
	{
		type = float
		cmlSat_MaxPayloadFactor = 8		//	the upper limit for payload factors exponent, 8 will be 64000 units of payload or 25.6 tons using comsatPayload - a HUGE payload for very late game, or something more to do with a saturn5 - this could be thought of as being contracted to deliver a big station component for another angency/company etc.
	}
	DATA
	{
		type = float
		cmlSat_NewPayloadFactor = Min( ( $cmlSat_PayloadFactor + 1 ) , @cmlSat_MaxPayloadFactor )	//	Increases by 1, but limited to max factor
	}

	DATA
	{
		type = int
		cmlSat_NewPayloadQuantity = 250 * int(Round( Pow( 2 , @cmlSat_NewPayloadFactor) ))		//	To show new quantity.	500, 1000, 2000 etc.
	}

	// ************ REQUIREMENTS ************

	REQUIREMENT
	{
		name = All of the below must be completed
		type = All

		REQUIREMENT
		{
			name = CompleteContract
			type = CompleteContract
			contractType = ComTestSat
			minCount = 3
			title = Complete @contractType Contract 3 times
		}

		REQUIREMENT
		{
			name = AcceptContract
			type = AcceptContract
			contractType = RepeatCmlSatPayloadDecrease
			title = Have not accepted @contractType Contract
			invertRequirement = true
		}		
	}

	BEHAVIOUR
	{
		name = SetcmlSat_PayloadFactorTarget
		type = Expression

		CONTRACT_COMPLETED_SUCCESS
		{
			cmlSat_PayloadFactor = @/cmlSat_NewPayloadFactor
		}
	}

	// ************ PARAMETERS ************

	PARAMETER
	{
		name = Duration
		type = Duration
		
		duration = 60m

		preWaitText = Time required to gather new contracts
		waitingText = Time remaining for new contracts
		completionText = Time complete.		
	}
}
