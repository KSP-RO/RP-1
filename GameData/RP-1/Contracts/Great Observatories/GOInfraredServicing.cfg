CONTRACT_TYPE
{
	name = GOInfraredServicing
	title = Infrared Space Telescope Servicing
	genericTitle = Resupply the coolant on your infrared space telescope
	group = GreatObservatories
	agent = Federation Aeronautique Internationale

	description = <b>Program: Great Observatories<br>Type: <color=blue>Optional</color></b><br><br>The liquid helium coolant on our infrared space telescope is getting rather low. If it drops to zero, the telescope will be forced to deactivate. Design, build, and launch a servicing craft to dock with the observatory and refill its coolant tanks to continue operations. 

	synopsis = Send a vessel to resupply the liquid helium coolant on @/targetVessel1

	completedMessage = Mission Success! You have resupplied @/targetVessel1 with enough coolant for now. Be sure to monitor your telescopes to keep them functional.

	// sortKey = 1507

	cancellable = true
	declinable = true
	autoAccept = false
	minExpiry = 0
	maxExpiry = 0
	maxCompletions = 4
	maxSimultaneous = 1
	deadline = 0

	targetBody = @/targetBody1

	prestige = Trivial       // 1.0x
	advanceFunds = 0
	rewardScience = 0
	rewardReputation = 40 // placeholder
	rewardFunds = 0
	failureReputation = 0 // was @rewardReputation
	failureFunds = 0

	// ************ REQUIREMENTS ************

	REQUIREMENT
	{
		name = ProgramActive
		type = ProgramActive
		program = GreatObservatories
	}
 	REQUIREMENT
	{
		name = CompleteContract
		type = CompleteContract
  		contractType = GOInfraredSpaceTelescope
		title = Completed Infrared Space Telescope
	}
 
	DATA
	{
		type = Vessel
		requiredValue = true
		targetVessel1 = AllVessels().Where(v => v.Parts().Where(p => p.AvailablePart("name") == RO-IST01Test || RO-IST02Test || RO-IST03Test || RO-IST04Test) && v.FreeDockingPorts()>0 && (v.ResourceCapacity(LqdHelium) / v.ResourceQuantity(LqdHelium))>0.26).Random()
		title = Must have an Infrared Space Telescope 1-4 part, an open docking port and 25% or less of liquid helium coolant
	}
	DATA
	{
		type = int
		coolantSpace = Round(@/targetVessel1.ResourceCapacity(LqdHelium) - @/targetVessel1.ResourceQuantity(LqdHelium))
		title = Get empty space for coolant
	}
	DATA
	{
		type = CelestialBody
		requiredValue = true
		targetBody1 = @/targetVessel1.CelestialBody()
		hidden = true
	}

	PARAMETER
	{
		name = ResupplyLH
		type = VesselParameterGroup
		title = Dock your servicing craft with @/targetVessel1
		disableOnStateChange = true

		PARAMETER
		{
			name = NewVessel
			type = NewVessel
			title = Launch a new vessel
			hideChildren = true
		}
		PARAMETER
		{
			name = DockingPort
			type = PartValidation
			partModule = ModuleDockingNode
			minCount = 1
			title = Have at least 1 docking port
			hideChildren = true
		}
  		PARAMETER
		{
			name = AllResources
			type = All
			title = Bring at least @/coolantSpace liquid helium coolant to refill your space telescope's coolant tanks.
			notes = This is the amount of coolant that would fill the telescope up

			
			PARAMETER
			{
				name = CoolantResupply
				type = HasResource
				resource = LqdHelium
				minQuantity = @/coolantSpace
				hideChildren = true
			}
   			PARAMETER
			{
				name = DockWithTelescope
				type = Docking
				vessel = @/targetVessel1
				title = Dock with @/targetVessel1
				hideChildren = true
				disableOnStateChange = true
			}
		}
	}

	
}
