CONTRACT_TYPE
{
	name = RepeatCmlSatPayloadDecrease
	title = Commercial Satellite Payload Decrease
	group = CommercialSats
	agent = Satellites

	description = Lowers the Payload Factor for Commercial Satellite contracts.  After accepting this contract you can wait (here) while existing offered commercial satellite contracts are removed (Previously accepted contracts are unaffected).  New contracts will begin to be issued in 60m.

	synopsis = Decreases the Payload for all new Commercial Satellite contracts to @/cmlSat_NewPayloadQuantity.Print() units.

	completedMessage = Congratulations!

	sortKey = 3001

	cancellable = true
	declinable = true
	autoAccept = false
	minExpiry = 5
	maxExpiry = 10
	maxCompletions = 0
	maxSimultaneous = 1
	deadline = 365  // 1 year

	targetBody = HomeWorld()



	prestige = Trivial       // 1.0x
	advanceFunds = 0
	rewardScience = 0
	rewardReputation = 0
	rewardFunds = 0
	failureReputation = 0
	failureFunds = 0


	// ************ DATA ************
	DATA
	{
		type = float
		cmlSat_MinPayloadFactor = 0		//	lower limit, payload factors are the exponent, 0 will be 500 units of payload
	}
	DATA
	{
		type = float
		cmlSat_NewPayloadFactor = Max( ( $cmlSat_PayloadFactor - 1 ) , @cmlSat_MinPayloadFactor )	//	 Limits to lower limit.
	}

	DATA
	{
		type = int
		cmlSat_NewPayloadQuantity = 500 * int(Round( Pow( 2 , @cmlSat_NewPayloadFactor) ))		//	To show new quantity.  500, 1000, 2000 etc.
	}



	// ************ REQUIREMENTS ************

	REQUIREMENT
	{
		name = All of the below must be completed
		type = All

		REQUIREMENT
		{
			name = CompleteContract
			type = CompleteContract
			contractType = ComTestSat
			minCount = 3
			title = Complete @contractType Contract 3 times
		}

		REQUIREMENT
		{
			name = AcceptContract
			type = AcceptContract
			contractType = RepeatCmlSatPayloadIncrease
			title = Have not accepted @contractType Contract
			invertRequirement = true
		}			

	}


	BEHAVIOUR
	{
		name = SetcmlSat_PayloadFactorTarget
		type = Expression

		CONTRACT_COMPLETED_SUCCESS
		{
			cmlSat_PayloadFactor = @/cmlSat_NewPayloadFactor
		}
	}

	// ************ PARAMETERS ************

	PARAMETER
	{
		name = Duration
		type = Duration
		
		duration = 60m

		preWaitText = Time required to gather new contracts
		waitingText = Time remaining for new contracts
		completionText = Time complete.
		
	}
}
