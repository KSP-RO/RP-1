//**********************************************************************************
//  Improved TV Camera
//
//	Based on the instrument flown on Mariner 10 and Viking Orbiters
//
//	[1] https://nssdc.gsfc.nasa.gov/nmc/experimentDisplay.do?id=1973-085A-01
//	[2] https://doi.org/10.1029/JB080i017p02357
//	[3] https://nssdc.gsfc.nasa.gov/nmc/experimentDisplay.do?id=1975-075A-01
//	[4] https://doi.org/10.1016/0019-1035(72)90134-0
//
//	Part originally created CobaltWolf as the Mariner 10 Television Camera System
//
//**********************************************************************************
//Mariner 10 television science system
//mass: 43.9 kg
//power consumption: 30.9 watts (average)
//2x cassegrain telescopes with 0.36x0.48 degree FoV [2], or selectable wide mode with 11x14 degree FoV [1]
//mated to vidicon tubes capable of 700 lines with 832 pixels per line, with 8 bits per pixel [1]
//8 modes could be selected, including 6 filters, wide-angle mode, and a calibration mode [1]
//42 seconds/frame, with 4,659,200 bits each [2]
//Frames could be immediately transmitted at 117.6 kbit/s (with some loss of quality), stored on tape 
//and played back at 22.05 kbit/s, or a partial frame could be immediately transmitted at 22.05 kbit/s
//(with no loss in quality). [2]
//Mariner 10 returned about 7000 frames in total

//Viking Orbiter Visual Imaging Subsystem
//mass: 40 kg
//power consumption: ???
//2x cassegrain telescopes with 0.97x1.11 degree FoV [4] mated to vidicon tubes capable of 1056 lines with
//1182 pixels per line, with 7 bits per pixel [4]
//8 modes could be selected, including 7 filters and a calibration mode [4]
//2.24 seconds/frame, with 8,737,344 bits each [4]
//However, the tape recorder can only record about 70%, so frames are scaled to 6,178,235 bits [4]
//Viking 1 Orbiter returned about 34,200 images total

//Both Mariner 10 and Viking Orbiter TV systems captured frames almost constantly, with the Viking Orbiter
//TV high frame rate allowing for continuous scans of the Mars surface
//Mariner 10 would take images in a preset pattern to maximize returns per Mercury pass
//Viking Orbiter could continuously scan underneath it's track, or take 54-frame 175x140 km composites of
//areas of interest
//Try to match Viking Orbiter, Mariner 10 was limited by duration of Mercury flybys, not it's TV system

//34,200 frames / 6-ish biomes per planet * 6,178,235 bits per frame = 35,215,939,500 bits per biome, or
//4,401,992,437.5 Bytes (4,401.99 MB)
//If we limit data rate to Mariner 10 117.6 kbit/s max, we end up with a total duration of about 300,000
//seconds, or 83 hours. Still relatively fast, but definitely encourages orbiters...

//VI03 is pretty much the worst science/value VI experiment. Divide the data size by 10, keep all else
//the same. Faster transmit time should at least make it more appealing.
//440.2 MB, ~8.32 hours @ 117.6 kbit/s

PART
{
	name = RO-ImprovedTVCamera
	module = Part
	author = Akron, Pap
	
	RSSROConfig = True

	MODEL
	{
		model = RP-1/Parts/Science/Assets/Mariner10/bluedog_mariner10_cameraStandalone
	}
	scale = 1
	rescaleFactor = 1.6

	node_stack_bottom = -0.035183, -0.127909, 0.0, 0.0, -1.0, 0.0, 0
	node_attach = 0.0, -0.127909, 0.0, 0.0, -1.0, 0.0
	
	// attachment rules: stack, srfAttach, allowStack, allowSrfAttach, allowCollision
	attachRules = 0,1,0,0,0
	
	TechRequired = earlyScience
	entryCost = 12000
	cost = 4700
	category = Science
	subcategory = 0
	title = VI03 - Improved TV Camera
	manufacturer = Coatl Aerospace East
	description =  The Improved TV Camera is used to take images in the visibile wavelength of planetary bodies from space. This camera is much higher resolution, and is capable of rapidly taking pictures, allowing it to quickly capture the entire surface of a planet at 100 meter-scale resolutions. Historically, this type of camera was flown on Mariner 10 and took the first images of Mercury.

	mass = 0.04
	bulkheadProfiles = srf
	crashTolerance = 11
	maxTemp = 1300
	emissiveConstant = 0.85
	thermalMassModifier = 4.0
	
	angularDrag = 2
	dragModelType = default
	maximum_drag = 0.2
	minimum_drag = 0.2
	PhysicsSignificance = 1
	
	tags = coatl ca science camera visible tv television imaging mariner mercury

	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = meshSwitchStand
		switcherDescription = Stand Style
		switcherDescriptionPlural = Stand Styles
		affectDragCubes = False
		affectFARVoxels = False
		SUBTYPE
		{
			name = Quadropod
			title = Quadropod
			transform = tripodMount
		}
		SUBTYPE
		{
			name = Mast
			title = Mast mount
			transform = mastMount
			node = bottom
		}
	}
	
	// MODULE
	// {
		// name = ModuleAnimateGeneric
		// animationName = deploy
		// startEventGUIName = Deploy Camera Assembly
		// endEventGUIName = Retract Camera Assembly
		// actionGUIName = Toggle Camera Assembly
        // evaDistance = 1.85
	// }
	
	
}

@PART[RO-ImprovedTVCamera]:NEEDS[SCANsat]:AFTER[RP-0]
{
	MODULE
	{
		name = SCANsat
		sensorType = 12 //2^2 + 2^3
		fov = 0.5
		min_alt = 0
		max_alt = 20000000
		best_alt = 0
		requireLight = True
		scanName = Visual
		RESOURCE
		{
			name	= ElectricCharge
			rate	= 0.031
		}
	}
	
	MODULE
	{
		name = SCANexperiment
		experimentType	= SCANsatVisual
	}
}