// Disable hibernation
@PART[*]:HAS[@MODULE[ModuleCommand]]:FINAL
{
	@MODULE[ModuleCommand],*
	{
		%hasHibernation = False
	}
}



// Disable attitude control on non-control parts.
@PART[*]:HAS[@MODULE[ModuleCommand]:HAS[~minimumCrew[>0]],!MODULE[ModuleAvionics],!MODULE[ModuleProceduralAvionics],!MODULE[ModuleScienceCore]]:AFTER[RP-0]
{
	MODULE
	{
		name = ModuleScienceCore
	}
}

// *** Command parts (Crewed)
// FIXME: Add any other 1-person capsules here
@PART[mk1pod|FASAMercuryPod|avionicsNoseCone]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 1.5
		interplanetary = False
	}
}

// Gemini
@PART[FASAGeminiPod2|FASAGeminiPod2White|ROAdvCapsule]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 2.5
	}
}
// Gemini SM, basically an Agena
@PART[FASAGeminiUtilityPack]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 15.0
	}
}


// Vostok/Voskhod
// All done via SM
@PART[Voskhod_Crew_A|IronVostok_Crew_A|ROC-VostokCapsule|ROC-VoskhodCapsule|rn_vostok_sc|rn_voskhod_sc]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 0.0
	}
}
@PART[IronVostok_Engine_A|Vostok_Module|rn_vostok_tdu|ROC-VostokService]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 10.0
		interplanetary = False
	}
}

// Big G
@PART[FASABigGeminiRetroModule]
{
	//yes, you can do this without a ModuleCommand
	MODULE
	{
		name = ModuleAvionics
		massLimit = 20.0
	}
}

// FIXME: do this for anything else Apollo sized
// Just the capsule, SM handles avionics
@PART[FASAApollo_CM|Mark1-2Pod|MK2VApod|SSTU-SC-B-CM|SSTU-SC-B-CMX|ROC-ApolloCM|rn_va_capsule]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 7.0
	}
}
// Big G, Soyuz DM
@PART[FASAGeminiBigG|FASAGeminiBigGWhite|SSTU-SC-A-DM|ok_sa|tg_sa|rn_zond_sa]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 4.0
	}
}

// 30t guidance for landers, Apollo SM, Orion CM
@PART[FASALM_AscentStage|mk2LanderCabin|MEMLander|SXTLander|bahaMk2LightningCockpit|rn_lk_lander|RO-Mk1Cockpit|RO-Mk1CockpitInline|SSTU-SC-B-SM|SSTU-LC2-POD|SSTU-SC-C-CM|SSTU-SC-C-CMX|FASAApollo_SM|MEMLanderSXT|ROC-ApolloSM|ROC-LEMAscent|rn_lok_sa]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 30.0
	}
}
// 20t guidance for smaller landers, Soyuz SM
@PART[landerCabinSmall|landerCabinMedium|SSTU-SC-A-SM]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 20.0
	}
}

// Big fellers. 100t avionics.
// Cockpits and Orion SM.
@PART[mk2Cockpit_Standard|mk2Cockpit_Inline|B9_Body_Mk2_Cockpit|B9_Body_Mk2_Cockpit_Intake|B9_Cockpit_M27|B9_Cockpit_MK2|B9_Cockpit_S3|B9_Cockpit_S2|XOrionPodX|XOrionPodXbb31|LazTekDragonV2|SSTU_LanderCore_LC3-POD|SSTU-SC-C-SM]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 100.0
	}
}

// Huge cockpits and that sort of thing
@PART[HL_Aero_Cockpit|B9_Cockpit_MK5|mk3Cockpit_Shuttle|STSOrbiter|CSSCrewCompartment|SSTU_LanderCore_LC5-POD]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 150.0
	}
}


@PART[cupola|investpod]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 0.0
	}
}

// Salyut and Almaz Stations
@PART[salyut1-4|almaz3-5]:FOR[RP-0]
{	
	MODULE
	{
		name = ModuleAvionics
		massLimit = 35
	}
}

@PART[salyut6|salyut7]:FOR[RP-0]
{	
	MODULE
	{
		name = ModuleAvionics
		massLimit = 50
	}
}

// RN Skylab Station
@PART[skylab]:FOR[RP-0]
{	
	MODULE
	{
		name = ModuleAvionics
		massLimit = 120.0
	}
}

// US Probes Integration Below, Probes with individual attitude control get
// ~ 2x weight control in avionics, allows for extra attitude/propulsion
@PART[pioneer_5]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 0.1
	}
}

@PART[pioneer_6_7_8_9]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 0.15
	}
}

@PART[pioneer_10_11]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 0.5
	}
}

@PART[neo_ulysses|neo_ds1|neo_near|neo_stardust|rn_new_horizons]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 1.0
	}
}

@PART[rn_voyager|rn_surveyor3|roverBody|roverBody_v2|torekka]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 2.0
	}
}

@PART[neo_dawn|rn_messenger|magellan]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 2.2
	}
}

@PART[neo_deepimpact]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 3.0
	}
}

@PART[ius_top]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 18.0
	}
}

@PART[eos_terra]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 8.0
	}
}

@PART[eos_aqua|eos_aura|galileo_mb]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 5.0
	}
}

@PART[eos_tdrs]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 6.0
	}
}

// ** Soviet Probes, Probes with individual attitude control get
// Basing values on the ~2x control allowed for US probes.
@PART[molniya1]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 3.0
	}
}

@PART[luna3]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 0.5
	}
}

@PART[luna9_als|luna_als]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 2.0
	}
}

@PART[polyot]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 1.5
	}
}

// ** Command parts (uncrewed)
@PART[probeCoreOcto2]:FOR[RP-0]  // Deprecated
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 0.2
		toggleable = true
		disabledkW = 0.001
	}
}

// Ranger / Mariner
@PART[SXTHECSRanger|bluedog_rangerCore|rn_mariner1_2]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 0.32		// 7-9-17 Pap: Up from 0.3 to have 5-1 Mass Ratio
		toggleable = true
		disabledkW = 0.0008
	}
}

// Ranger Block III
@PART[probeCoreHex|probeCoreHex_v2]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 0.65		// 7-9-17 Pap: Up from 0.6 to have 6.5-1 Mass Ratio
		toggleable = true
		disabledkW = 0.0015
	}
}

// Surveyor (Deprecated)
@PART[probeCoreOcto]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 1.0
		toggleable = true
		disabledkW = 0.0015
	}
}

// AsteroidDay Core (1T Satellite)
@PART[HECS2_ProbeCore]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 1.0
		toggleable = true
		disabledkW = 0.0015
	}
}

// Other Satellite Bus
@PART[novapod|UAEcubplate|torpod|sondex2pod|neptuno|explonpod|Maxurpod|B9_Body_Mk2_SAS_050m|mk2DroneCore|B9_Cockpit_D25|B9_Cockpit_MK1_Control_ACU|FASAICBMProbe]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 10.0
		toggleable = true
		disabledkW = 0.002
	}
}

// Early Cube Probe Core
@PART[RO_probeCoreCubeEarly]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 3.3
		toggleable = true
		disabledkW = 0.002
	}
}

// Small Satellite Bus
@PART[probeCoreCube]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 7.7
		toggleable = true
		disabledkW = 0.002
	}
}

// Medium Satellite Bus
@PART[RO_probeCoreCubeMedium]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 12
		toggleable = true
		disabledkW = 0.002
	}
}

// Boeing 702
@PART[RO_boeing702]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 15
		toggleable = true
		disabledkW = 0.002
	}
}

// Early Controllable Core
@PART[RO_earlyControllableCore]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 0.2
		toggleable = true
		disabledkW = 0.001
	}
}

// Surveyor Core
@PART[RO_surveyorCore|ca_landv_core]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 1
		toggleable = true
		disabledkW = 0.0015
	}
}

// *** Guidance units (including stages)
// Can be used with a proc fairing out to 2.67m as Jupiter nosecone too, so 60t.
@PART[FASAExplorerNosecone]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 60.0
		interplanetary = False
	}
}
// MRLV core (with Jupiter-C avionics)
@PART[FASA_Mercury_LFT_Long]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 60.0
		interplanetary = False
	}
}

// Able guidance
@PART[RP0probeAvionics0-81m]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 5.0
		interplanetary = False
	}
}

// Delta (i.e. AbleStar or Delta E and above)
@PART[RP0probeAvionics1-4m]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 10.0
		interplanetary = False
	}
}

//  Centaur astrionics.
//  Approximates the maximum current Centaur + payload combined mass (23t + 25t).

@PART[RP0probeAvionics3-05m]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 45.0
		toggleable = true
		disabledkW = 0.02
	}
}

// FIXME: Do this for other small upper stages.
@PART[FASAAgenaProbe|RP0probeAvionics1-5m|RSBtankAgenaD|bluedog_agenaProbeCore]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 16.0
		toggleable = true
		disabledkW = 0.01
	}
}

// Saturn IU, S-IVB. Note we make a stock version, RP0probeAvionics66m
@PART[FASAApolloIU|FASAApalloLFTJ2Plate|RP0probeAvionics66m]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 20000.0
		interplanetary = False
	}
}
// Early Saturn IU (Saturn I Block II)
@PART[SXT375mProbe|bluedog_Saturn_S4_InstrumentUnit]:FOR[RP-0]
{
	@description ^= :$: Allows full control over the vessel, up to the tonnage limit (cumulative).:
	MODULE
	{
		name = ModuleAvionics
		massLimit = 1500.0
	}
}

// ** Titan
// Transtage
@PART[FASAGeminiLFECentarTwin]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 35.0
	}
}
// Titan I upper stage, Titan I was 105t but let's add some margin.
@PART[TitanIUpper]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 130.0
		techRequired = basicAvionics
		interplanetary = False
	}
}

// Titan II / IIGLV upper
@PART[FASAGeminiLFTMed|FASAGeminiROTitanIIGLVUpper]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 160.0
		techRequired = stability
		interplanetary = False
	}
}

// Titan II/III/IV upper
@PART[FASAGeminiLFTMedWhite]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 1000.0
		techRequired = improvedFlightControl
		interplanetary = False
	}
}

// ** Centaurs
// Centaur A/B/C/D/D1
@PART[FASAGeminiLFTCentar]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 40.0
		techRequired = improvedFlightControl
	}
}
// Centaur D-1T
@PART[FASAGeminiLFTCentarCSM_D1T]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 40.0
		techRequired = improvedFlightControl
	}
}
// Centaur D2
@PART[FASAGeminiLFTCentarCSM_D2]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 45.0
		techRequired = avionicsTL6
	}
}

// Centaur D3
@PART[FASAGeminiLFTCentarCSM_D5]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 350.0
		techRequired = avionicsTL7
	}
}

// Centaur T
@PART[FASAGeminiLFTCentarCSM_T]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 50.0
		techRequired = avionicsTL6
	}
}

// ** Atlas
// Atlas D / MALV
@PART[FASA_Atlas_LFT_Cone]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 130.0
		techRequired = basicAvionics
		interplanetary = False
	}
}
// Atlas E/F
@PART[FASA_Atlas_LFT_Cone2]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 125.0
		techRequired = basicAvionics
		interplanetary = False
	}
}
// Atlas F-mod (appears identical to E/F)
@PART[FASAAtlasFMod]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 130.0
		techRequired = basicAvionics
		interplanetary = False
	}
}
// Atlas H
@PART[FASAAtlasH]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 160.0
		techRequired = basicAvionics
		interplanetary = False
	}
}
// Atlas II
@PART[FASAAtlasII]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 180.0
		techRequired = basicAvionics
		interplanetary = False
	}
}
// Atlas SLV-3 (Appears to be Atlas E/F)
@PART[FASAMercuryAtlasLFTLong]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 125.0
		techRequired = basicAvionics
		interplanetary = False
	}
}
// Atlas SLV-3A (used as booster for Agena D / GATV)
@PART[FASAAtlasSLV3A]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 150.0
		techRequired = basicAvionics
		interplanetary = False
	}
}

// Atlas LV-3C (used as booster for early Atlas-Centaur)
@PART[FASAAtlasLV3C]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 130.0
		techRequired = basicAvionics
		interplanetary = False
	}
}

// Atlas SLV-3C (used as booster for mid Atlas-Centaur)
@PART[FASAAtlasSLV3C]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 150.0
		techRequired = basicAvionics
		interplanetary = False
	}
}

// Stage guidance rings
@PART[GuidanceEarly3m]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 300.0
		interplanetary = False
	}
}
@PART[GuidanceEarly2m]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 130.0
		interplanetary = False
	}
}
// V-2 guidance, 3kW, 340kJ (guesses)
@PART[GuidanceStart1m|Bumper_Control]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 20.0
		interplanetary = False
	}
}
// Starting 4m guidance: heavy!
@PART[GuidanceStart4m]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 100.0
		interplanetary = False
	}
}

// Vanguard/Redstone/R-5 guidance, 300W, 108kJ
@PART[GuidanceEarly1m]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 45.0
		interplanetary = False
	}
}
// Advanced 1m guidance, 750W, 1080kJ
@PART[GuidanceLate1m]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 150.0
		interplanetary = False
	}
}

// Config for RN Proton (Third Stage)
@PART[rn_protonk_stg3|ALV_LFO_B]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 700.0
		interplanetary = False
	}
}
// Config for RN Proton (Block D-M2)
@PART[rn_proton_blockd|Libra_LFO_B]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 20.0
	}
}

// Config for RN R-7 (Block A)
@PART[rn_r7_blok_a|rn_r7_blok_a_2|rn_r7_blok_a_3|rn_r7_blok_a_4|rn_r7_blok_a_5|rn_r7_blok_a_6|rn_r7_blok_a_7|rn_r7_blok_a_8|rn_r7_blok_a_9|rn_r7_blok_a_10|rn_r7_blok_a_11|rn_r7_blok_a_12|rn_r7_blok_a_13|rn_r7_blok_a_14|TLV_LFO_B]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 280.0
		interplanetary = False
	}
}
// Config for RN R-7 (Block I)
@PART[rn_r7_blok_i|rn_r7_blok_i_2|rn_r7_blok_i_3|rn_r7_blok_i_4|rn_r7_blok_i_5|rn_r7_blok_i_6|rn_r7_blok_i_7|rn_r7_blok_i_8|TLV_LFO_D]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 30.0
		interplanetary = False
	}
}

// Config for RN R-7 (Block L/E, Fregat)
@PART[rn_fregat1|rn_fregat1_2|rn_fregat1_3|rn_molniya_blockl|rn_molniya_blockl_2|rn_molniya_blockl_3|rn_r7_vostok_blok_e|rn_r7_vostok_blok_e_2|rn_r7_vostok_blok_e_lunar|Alto_LFO_A]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 12.0
	}
}

//Config for N-1 launcher (Block V)
@PART[LLV_LFO_C]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 2700.0
		interplanetary = False
	}
}

//Config for L3 spaceship (LOK + LK + Block D + Block G), 95 tons departure mass + 5t to add some margin, avionics in Block G
@PART[LLV_LFO_D]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 100.0
	}
}

//
@PART[FASADeltaAv0]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 65.0
		interplanetary = False
	}
}
@PART[FASADeltaAv1]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 130.0
		interplanetary = False
	}
}
@PART[FASADeltaAv2]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 275.0
		interplanetary = False
	}
}
@PART[FASADeltaAv3]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 400.0
		interplanetary = False
	}
}
@PART[FASADeltaAv4]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 755.0
		interplanetary = False
	}
}
@PART[skylab-trs]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 150.0	// Just a guess but since the TRS was supposed to reposition Skylab, I figured it should be set high
	}
}

// Do not allow the SSTU Upper Stages to control any avionics. They should require an additional avionics package like all other parts.
@PART[SSTU-SC-TANK-MUS-*]:NEEDS[SSTU]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 0.0
	}
}

// Add ability to turn off avionics to crewed parts
// RP0.dll will only let them be turned off if they're currently empty
@PART[*]:HAS[#CrewCapacity[*],~CrewCapacity[0]]:AFTER[RP-0]
{
	@MODULE[ModuleAvionics]
	{
		%toggleable = true
		%disabledkW = 0.1
	}
}
@PART[ca_vor_core]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 12.0
	}
}

@PART[ca_fom_lander]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 2.0
	}
}

@PART[ca_linkor]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 12.0
	}
}

// Support for the Sample Return Capsule
@PART[RP0-SampleReturnCommand]:FOR[RP-0]
{
	MODULE
	{
		name = ModuleAvionics
		massLimit = 0.15
		interplanetary = False
	}
}
