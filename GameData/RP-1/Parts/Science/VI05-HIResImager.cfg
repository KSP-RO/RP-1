//**********************************************************************************
//  High Resolution Imaging Device
//
//	Based on MRO HiRise Imager
//	[1] https://nssdc.gsfc.nasa.gov/nmc/experimentDisplay.do?id=2005-029A-01
//	[2] https://doi.org/10.1029/2005JE002605
//
//	Part originally created by DMagic for DMagic Orbital Science
//
//**********************************************************************************
//Mars Reconnaissance Orbiter High Resolution Imaging Science Experiment HiRISE
//mass: 65 kg [2]
//power consumption: 60 watts (average) [2]
//cassegrain telescope with 1.14 degree FoV infrared or 0.23 degree FoV color, mated to pushbroom CCDs
//with a width of 20,048 pixels (red) or 4,048 pixels (color), at 14 bits per pixel [2]
//Maximum pushbroom swath length of 63,780 pixels over 6 seconds [2]
//14-bit, 8-bit, or 8-bit (compressed 1.6x) modes available, as well as partial-width captures [2]
//capable of fairly complex image processing onboard MRO to reduce data demands
//MRO X-band downlink can operate at up to 4 Mbit/s, but typically operates at lower bit rates
//About 35% of MRO 50 Tb data allocation expected to be given to HiRISE, for 17.5 Tb total
//17.5 Tb / 6-ish biomes = 2,916.67 Gb per biome (364,583.3 MB)
//If we transmit at 2 Mbit/s, total duration is 1,458,333 seconds (405.1 hours)

PART
{
    name = RO-HIRES
	RSSROConfig = True
	module = Part
	author = DMagic

	MODEL
	{
		model = RP-1/Parts/Science/Assets/modelScope
		scale = 0.8, 0.8, 0.8

	}
	scale = 1
	rescaleFactor = 1.8

	node_stack_bottom = 0.0, -0.3008, 0.0, 0.0, -1.0, 0.0, 0
	node_attach = 0.0, -0.272, 0.0, 0.0, -1.0, 0.0, 0

	TechRequired = basicScience
	entryCost = 8000
	cost = 4000
	category = Science
	subcategory = 0
	title = VI05 - High Resolution Imaging Device
	manufacturer = DMagic
	description = The High Resolution Imaging Device is used to take images in the visible wavelength of planetary bodies from space. This imager takes very high resolution images and can show details previously undiscovered on other planetary bodies. Historically, this type of camera was flown on the Mars Reconnaissance Orbiter.
	attachRules = 1,1,0,0,0

	// --- standard part parameters ---
	mass = 0.065
	bulkheadProfiles = srf
	maxTemp = 1073.15
	crashTolerance = 12
	gTolerance = 100
	maxPressure = 20000
	breakingForce = 250
	breakingTorque = 250
	emissiveConstant = 0.85
	thermalMassModifier = 4.0
	PhysicsSignificance = 1

	tags = science dmagic hirise mro imaging visible mars
		
	angularDrag = 2
	dragModelType = default
	maximum_drag = 0.2
	minimum_drag = 0.2

	// MODULE
	// {
		// name = ModuleAnimateGeneric
		// animationName = scopeShutter
		// startEventGUIName = Open Shutter
		// endEventGUIName = Close Shutter
		// actionGUIName = Toggle Shutter
        // evaDistance = 1.85
	// }
	
	MODULE
	{
		name = ModuleKerbNetAccess
		MinimumFoV = 15
		MaximumFoV = 35
		AnomalyDetection = 0
		DISPLAY_MODES
		{
			Mode = Terrain
		}
	}

	MODULE
	{
		name = DMModuleScienceAnimate
		
		animationName = scopeShutter
			
		experimentID = scopeScan
		
		customFailMessage = This telescope is not suitable for use during atmospheric flight or on the surface, try again in space.

		experimentAnimation = true
		experimentWaitForAnimation = true
		keepDeployedMode = 2
		
		showEndEvent = false
		showStartEvent = false
		showToggleEvent = true
		startEventGUIName = Open Shutter
		endEventGUIName = Close Shutter
		toggleEventGUIName = Toggle Shutter
		
		experimentActionName = Log Visual Observations
		resetActionName = Discard Observations
		
		useStaging = False	
		useActionGroups = True
		hideUIwhenUnavailable = False
		rerunnable = True
		usageReqMaskExternal = 8
		
		xmitDataScalar = 1.0

		dataIsCollectable = True
		collectActionName = Take Data
		interactionRange = 1.2
		externalDeploy = True
	}

}

@PART[RO-HIRES]:NEEDS[SCANsat]:AFTER[RP-0]
{
	MODULE
	{
		name = SCANsat
		sensorType = 264 //2^8 + 2^3
		fov = 1.14
		min_alt = 0
		max_alt = 1000000
		best_alt = 300000
		requireLight = True
		scanName = Visual
		RESOURCE
		{
			name	= ElectricCharge
			rate	= 0.060
		}
	}
	
	MODULE
	{
		name = SCANexperiment
		experimentType	= SCANsatVisual
	}
}