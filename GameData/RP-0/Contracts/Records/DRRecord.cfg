CONTRACT_TYPE
{
  name = recordUncrewedDR
  group = Records
	
  title = Uncrewed Downrange Record of @uncrewedTargetDRKM km.
  description = We want you to set a new uncrewed downrange record! Reach @uncrewedTargetDRKM km downrange in a suborbital trajectory (going above the Kármán line).
	genericTitle = Uncrewed Downrange Record
  genericDescription = We want you to set a new uncrewed downrange record!
  synopsis = Set an uncrewed downrange record of @uncrewedTargetDRKM km.
  completedMessage = Congratulations! You've set a new uncrewed downrange record and are closer to your first Orbital Vehicle!
	
	agent = Federation Aeronautique Internationale

  autoAccept = true
	cancellable = true
	declinable = false
	
	prestige = Trivial

  targetBody = HomeWorld()

  // Can only have one active
  maxSimultaneous = 1

  // Contract rewards
  rewardFunds = @rewardFundsInternal
	rewardReputation = @rewardReputationInternal
    
  DATA
  {
    title = This is the list of all of the downrange records
    type = List<float>
    soundingDRs = [ 20000, 50000, 100000, 200000, 500000, 750000, 1000000, 2000000, 3000000, 4000000, 5000000 ]
  }
  
  DATA
  {
    title = This is the current active index
    type = float
    soundingDRIndex = RP0_SoundingDRIndex
  }
  
  DATA
  {
    title = This is the current Downrange Target
    type = float
    uncrewedTargetDR = @soundingDRs.ElementAt(@soundingDRIndex)
    uncrewedTargetDRKM = @uncrewedTargetDR*0.001
  }

	DATA
	{
		type = float
		rewardFundsInternal = 200.0 + Min( @uncrewedTargetDR * 0.005, 5000 + @uncrewedTargetDR * 0.0005 )
	}	

	DATA
	{
		type = float
		rewardReputationInternal = 3.0 + Min( @uncrewedTargetDR * 0.00001, 10 + @uncrewedTargetDR * 0.000001 )
	}

  PARAMETER
	{
		name = VesselGroup
		type = VesselParameterGroup
		
		title = Reach @/uncrewedTargetDRKM km downrange.
		
		PARAMETER 
		{
			name = Crewmembers
			type = HasCrew
			minCrew = 0
			maxCrew = 0
			title = Uncrewed
			hideChildren = true
		}
    
		PARAMETER
		{
			name = ReachAlt
			type = ReachState
			minAltitude = 100000
			disableOnStateChange = true
			title = Reach an altitude of at least 100 km
			hideChildren = true
		}
		
		PARAMETER
		{
			name = ReachDistance
			type = DownrangeDistance
			distance = @/uncrewedTargetDR
			title = Reach a downrange distance of at least @/uncrewedTargetDRKM km
		}
	}

  BEHAVIOUR
  {
    name = IncrementIndex
    type = Expression

    CONTRACT_COMPLETED_SUCCESS
    {
        RP0_SoundingDRIndex = RP0_SoundingDRIndex + 1
    }
  }

  REQUIREMENT
  {
    type = Expression
    title = Downrange

    expression = @/soundingDRIndex < @/soundingDRs.Count()
  }
}
