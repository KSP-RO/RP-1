CONTRACT_TYPE
{
	name = moon_SpaceStation_LongDuration
	title = Long Duration Lunar Orbital Habitation
	group = LunarHabitation
	agent = Stations

	description = <b>Program: Lunar Habitation<br>Type: <color=blue>Optional</color></b><br><br>After successfully launching your first Lunar Space Station, it is now time to crew it with @/crewRequired astronauts, and have them stay on board to accumulate the next month worth of Long Term Habitation experimentation.&br;&br;<b>Number of Phases Completed: @/index / @/maxCompletions</b>

	genericDescription = Design, build, and launch a new space station with the specified crew into Earth orbit for the listed duration. 

	synopsis = Launch a space station with the specified requirements

	completedMessage = Congratulations! This phase of the long duration lunar orbital habitation is complete!

	sortKey = 1502

	cancellable = true
	declinable = false
	autoAccept = false
	minExpiry = 0
	maxExpiry = 0
	maxCompletions = 4
	maxSimultaneous = 1
	deadline = 0

	targetBody = Moon

	// ************ REWARDS ************
	
	prestige = Trivial       // 1.0x
	advanceFunds = 0
	rewardScience = 0
	rewardReputation = 250
	rewardFunds =  0
	failureReputation = 0 // was @/rewardReputation
	failureFunds = 0

	// ************ REQUIREMENTS ************

	REQUIREMENT
	{
		name = ProgramActive
		type = ProgramActive
		program = LunarHabitation
	}
	REQUIREMENT
	{
		name = CompleteContract
		type = CompleteContract
		contractType = moon_spaceStation
	}
	REQUIREMENT
	{
	    name = Expression
	    type = Expression
	    title = Less than 4 step completions
	    expression = $RepeatLunarStation_Count < 4
	}	

	DATA
	{
		type = List<float>
		durationMultiplier = [3,6,12,24]
		experimentList = [0.12502,0.2502,0.502,1]
	}
	DATA
	{
		type = float
		durationText = 30 * @/durationMultiplier.ElementAt(@/index)
	}
	DATA
	{
		type = float 
		experimentCompletion = @/experimentList.ElementAt(@/index)
	}
	DATA
	{
		type = List<int>
		crewList = [2,2,3,3]
	}
	DATA
	{
		type = int
		index = $RepeatLunarStation_Count + 0
		crewRequired = @/crewList.ElementAt(@/index)
	}
	
	// ************ PARAMETERS ************
	
	PARAMETER
	{
		name = stayOnStation
		type = VesselParameterGroup
		title = Keep at least @/crewRequired crew aboard the station and conduct multi-week habitation analysis for @/durationText days.
		vessel = prototypeSpaceStation
		notes = You can work on other contracts while your crew are working. You are safe to return to Mission Control
		completeInSequence = true
		disableOnStateChange = true
		
		PARAMETER
		{
			name =  Multi-Month Lunar Orbit Habitation
			type = RP1CollectScience
			title = Conduct  Multi-Month Lunar Orbit Habitation of your astronauts for @/durationText days
			notes = This experiment requires 750 units of Research Payload every 30d//Placeholder value.
			targetBody = Moon()
			situation = InSpaceLow
			experiment = RP0LunarOrbitHabit2
			fractionComplete = @/experimentCompletion
			completeInSequence = true
		}
	}
}
