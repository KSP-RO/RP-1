CONTRACT_TYPE
{
    name = EOS2OGORep
    title = Operational Geophysical Observatory 
    group = EOS2
    agent = Federation Aeronautique Internationale
    
    description = <b>Program: Advanced Earth Observation Satellites<br>Type: <color=blue>Optional</color></b><br><br>The first Observatory has provided incredible data on the magnetosphere, but the space environment is dynamic and constantly changing. We need long-term monitoring.<br><br>Launch another OGO satellite into a highly elliptical orbit to continue the survey.<br><br><b><color="yellow">Make sure your craft contains a Magnetometer, RPWS, Mass Spectrometer, and Cosmic Ray detector. Place it in a highly eccentric orbit.</color></b><br><br><b>Number of Contracts Completed: @index / @maxCompletions</b><br><br>Historical example: OGO 3/5.

    synopsis = Launch an operational OGO Geophysical satellite.

    completedMessage = Success! The observatory is online and transmitting data.

    sortKey = 510

    cancellable = true
    declinable = false
    autoAccept = false
    minExpiry = 0
    maxExpiry = 0
    maxCompletions = 6  // Historical OGO program had 6 satellites
    maxSimultaneous = 1
    deadline = 0

    targetBody = HomeWorld()

    // ************ REWARDS ************
    prestige = Trivial       
    advanceFunds = 0
    rewardScience = 0
    rewardFunds = 0
    failureFunds = 0
    rewardReputation = 40
    failureReputation = 0 

    // ************ REQUIREMENTS ************

    REQUIREMENT
    {
        name = ProgramActive
        type = ProgramActive
        program = EarthObservationScience2
    }

    REQUIREMENT 
    {   
        name = CompleteContract
        type = CompleteContract
        contractType = EOS2OGO1
        title = Completed First OGO Satellite
    }

    DATA
    {
        type = int
        index = $RepeatOGOSats_Count
    }

    BEHAVIOUR
    {
        name = IncrementTheCount
        type = Expression
        
        CONTRACT_COMPLETED_SUCCESS
        {
            RepeatOGOSats_Count = $RepeatOGOSats_Count + 1
        }
    }
    
    //************* PARAMETERS ***************
    PARAMETER
    {
        name = OGO
        type = VesselParameterGroup
        title = Geophysical Observatory
        define = OGO

        PARAMETER
        {
            name = NewVessel
            type = NewVessel
            title = Launch a new vessel
            hideChildren = true
        }
        PARAMETER 
        {
            name = Crewmembers
            type = HasCrew
            minCrew = 0
            maxCrew = 0
            title = Uncrewed
            hideChildren = true
        }

        PARAMETER
        {
            name = OrbitSequence
            type = Sequence
            title = Survive in orbit for 180 days

            PARAMETER
            {
                name = HasPower
                type = HasResource
                resource = ElectricCharge
                minQuantity = 1.0
                title = Craft must have Electric Charge
                hideChildren = true
            }

            PARAMETER
            {
                name = PartValidation
                type = PartValidation
                
                VALIDATE
                {
                    MODULE
                    {
                        name = Experiment
                        experimentID = RP0magScan2
                    }
                }
                title = Carry a Helium Magnetometer
            } 
            
            PARAMETER
            {
                name = PartValidation
                type = PartValidation
                
                VALIDATE
                {
                    MODULE
                    {
                        name = Experiment
                        experimentID = RP0RPWS1
                    }
                }
                title = Carry a Radio and Plasma Wave Detector
            }

            PARAMETER
            {
                name = PartValidation
                type = PartValidation
                
                VALIDATE
                {
                    MODULE
                    {
                        name = Experiment
                        experimentID = RP0massSpec1
                    }
                }
                title = Carry a Mass Spectrometer
            } 
            
            PARAMETER
            {
                name = PartValidation
                type = PartValidation
                
                VALIDATE
                {
                    MODULE
                    {
                        name = Experiment
                        experimentID = RP0cosmicRay1
                    }
                }
                title = Carry a Cosmic Ray Detector
            }

            PARAMETER
            {
                name = Orbit
                type = Orbit
                minApA = 100000000 // 100,000 km
                minPeA = 250000    // 250 km
                minInclination = 30 
                maxInclination = 40
                disableOnStateChange = true
                title = Orbit requirements (Eccentric, >100 Mm Apogee)
            }

            PARAMETER
            {
                name = Duration
                type = Duration
                duration = 180d
                preWaitText = Check for stable orbit
                waitingText = Checking for stable orbit
                completionText = Stable orbit: Confirmed
            }
        }
    }
}